        if (service.isCancelled && service.cancelReason && service.cancelReason.value) {
            const cancelCode = service.cancelReason.value;
            const cancelReason = cancellationCodes[cancelCode] || 'Unknown cancellation reason';
            reasonBox.textContent = cancelReason.replace('This train has been cancelled because of', 'Service cancelled because of');
            reasonBox.style.borderLeft = '10px solid red'; // Red border for cancellation
            reasonBox.style.display = 'flex'; // Show the reason box
        } else if (service.delayReason && service.delayReason.value) {
            const delayCode = service.delayReason.value;
            const delayReason = latenessCodes[delayCode] || 'Unknown delay reason';
            reasonBox.textContent = delayReason.replace('This train has been delayed by', 'Train delayed by');
            reasonBox.style.borderLeft = '10px solid red'; // Red border for delay
            reasonBox.style.display = 'flex'; // Show the reason box
        } else if (service.operator === 'London North Eastern Railway' && !service.delayReason && !service.cancelReason) {
        // Additional message for LNER operator with no delay/cancel reason
        reasonBox.textContent = 'Reserve seats up to 5 minutes prior to departure.';
        reasonBox.style.borderLeft = '10px solid yellow'; // Yellow border for general info
        reasonBox.style.display = 'flex'; // Show the reason box
        } else if (service.operator === 'TransPennine Express' && !service.delayReason && !service.cancelReason) {
        // Additional message for LNER operator with no delay/cancel reason
        reasonBox.textContent = 'Penalty fares apply on this train, buy before you board.';
        reasonBox.style.borderLeft = '10px solid yellow'; // Yellow border for general info
        reasonBox.style.display = 'flex'; // Show the reason box
        } else if (service.operator === 'Northern' && !service.delayReason && !service.cancelReason) {
        // Additional message for LNER operator with no delay/cancel reason
        reasonBox.textContent = 'Penalty fares apply on this train, buy before you board.';
        reasonBox.style.borderLeft = '10px solid yellow'; // Yellow border for general info
        reasonBox.style.display = 'flex'; // Show the reason box
        } else if (service.operator === 'Grand Central' && !service.delayReason && !service.cancelReason) {
        // Additional message for LNER operator with no delay/cancel reason
        reasonBox.textContent = 'You MUST have a seat reservation.';
        reasonBox.style.borderLeft = '10px solid yellow'; // Yellow border for general info
        reasonBox.style.display = 'flex'; // Show the reason box
        } else {
            // Handle formation and toilet information
            const formationInfo = handleFormationAndToilets(service);

            if (formationInfo) {
                reasonBox.textContent = formationInfo; // Update reason box with formation info
                reasonBox.style.borderLeft = '10px solid yellow'; // Yellow border for general info
                reasonBox.style.display = 'flex'; // Show the reason box
            }
        }
    }
